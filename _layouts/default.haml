!!!strict

%html{html_attrs}

  %head
    %meta{ :"http-equiv" => 'Content-Type', :content => 'text/html; charset=utf-8' }
    %title= page.title.match(/The Pug Automatic$/) ? page.title : "#{page.title} â€“ The Pug Automatic"
    %meta{ :name => 'author', :content => 'Henrik Nyh (http://henrik.nyh.se)' }
    %link{ :href => FEED_URL, :rel => "alternate", :title => "The Pug Automatic", :type => "application/atom+xml" }
    
    %link{ :rel => "openid.server",   :href => "http://openid.nyh.se/henrik" }
    %link{ :rel => "openid.delegate", :href => "http://openid.nyh.se/henrik" }
    
    %link{ :rel => "stylesheet", :type => 'text/css', :href => '/css/syntax.css' }
    %link{ :rel => "stylesheet", :type => 'text/css', :href => '/css/screen.css' }
    
    %script{ :src => '/js/jquery.min.js', :type => 'text/javascript' }
    %script{ :src => '/js/jquery.cookie.js', :type => 'text/javascript' }
    %script{ :src => '/js/jquery.twitter.js', :type => 'text/javascript' }
    %script{ :src => '/js/app.js', :type => 'text/javascript' }

  %body
    .site
    
      .sidebar

        .title
          %p= link_to('<img src="/images/pug.png" alt="" />', "/")
          %p= link_to("The Pug Automatic", "/")

        %p== A blog by #{link_to('Henrik Nyh', '/about')} mostly on #{tag_link 'Ruby'}, #{tag_link 'Rails', 'Ruby on Rails'} and #{tag_link 'OS X'} automation.
          
        %form#search{ :method => 'get', :action => 'http://www.google.com/search' }
          %input.text{ :type => 'text', :name => 'q' }
          %input{ :type => 'hidden', :name => 'sitesearch', :value => 'henrik.nyh.se' }
          %input.button{ :type => 'submit', :value => 'Google' }
        
        = tag_cloud(site.tags)

        #github
          %a{ :href => 'http://github.com/henrik' }
            %img{ :src => '/images/github.png', :alt => 'github.com/henrik' }
            
        #tweets
          
      .content= content
      
      .footer
        .contact
          %p= link_to('RSS', FEED_URL)
        .contact
          %p= link_to('henrik@nyh.se', 'mailto:henrik@nyh.se')
        .contact
          %p
            Powered by
            = link_to('Jekyll', 'http://github.com/henrik/jekyll')
            and
            = link_to('Disqus', 'http://disqus.com'), '.'

      :javascript
      
        // Google Analytics
        var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
        document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
        </script>
        <script type="text/javascript">
        try {
        var pageTracker = _gat._getTracker("UA-8429899-1");
        pageTracker._trackPageview();
        } catch(err) {}

        // Disqus
        (function() {
          var links = document.getElementsByTagName('a');
          var query = '?';
          for(var i = 0; i < links.length; i++) {
            if(links[i].href.indexOf('#disqus_thread') >= 0) {
              query += 'url' + i + '=' + encodeURIComponent(links[i].href) + '&';
            }
          }
          document.write('<script charset="utf-8" type="text/javascript" src="http://disqus.com/forums/henrikn/get_num_replies.js' + query + '"></' + 'script>');
        })();
